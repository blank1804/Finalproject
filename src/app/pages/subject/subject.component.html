<div style="height: 100%">

    <div class="d-flex flex-column" style="height: 100%">

      <nz-breadcrumb>
        <nz-breadcrumb-item>วิชา</nz-breadcrumb-item>
      </nz-breadcrumb>

      <div class="toolbar">
      <nz-page-header-extra class="headex">
        <button class="buttontool" nz-button nzType="text">
          <a routerLink=""></a>
        </button>
      </nz-page-header-extra>
    </div>

      <div nz-row>
        <div nz-col [nzSpan]="24">
          <h3>รายชื่อวิชา</h3>
        </div>
      </div>
      <br />
      <nz-collapse>
        <nz-collapse-panel
          class="collapse-header"
          nzHeader="จัดการ"
          [nzActive]="false"
        >

        <nz-tabset nzType="card">
          <nz-tab [nzTitle]="'เพิ่ม'">


          <form
            [formGroup]="subjectForm"
            nzLayout="'vertical'"
            class="ss-form-search-criteria"
          >
            <nz-row nz-row [nzGutter]="24" class="center">
              <div nz-col nzXs="0" nzSm="0" nzMd="2"></div>
              <div nz-col nzXs="24" nzSm="24" nzMd="6">
                <nz-form-item>
                  <nz-form-label [nzSpan]="6" nzRequired
                    >รหัสวิชา</nz-form-label
                  >
                  <nz-form-control nzErrorTip="กรุณากรอกรหัสวิชา">
                    <input
                      nz-input
                      formControlName="subjectId"
                      placeholder=""
                    />
                  </nz-form-control>
                </nz-form-item>
              </div>

              <div nz-col nzXs="24" nzSm="24" nzMd="6">
                <nz-form-item>
                  <nz-form-label [nzSpan]="6" nzRequired
                    >ขื่อวิชา</nz-form-label
                  >
                  <nz-form-control nzErrorTip="กรุณากรอกรหัสวิชา">
                    <input
                      nz-input
                      formControlName="subjectName"
                      placeholder=""
                    />
                  </nz-form-control>
                </nz-form-item>
              </div>
              <div nz-col nzXs="24" nzSm="24" nzMd="6">
                <nz-form-item>
                  <nz-form-label [nzSpan]="8" nzRequired
                    >จำนวนหน่วยกิจ</nz-form-label
                  >
                  <nz-form-control nzErrorTip="กรุณากรอกรหัสวิชา">
                    <input
                      nz-input
                      type="number"
                      formControlName="subjectCredit"
                      placeholder=""
                    />
                  </nz-form-control>
                </nz-form-item>
              </div>

              <div nz-col nzSm="2" nzMd="2">
                <nz-form-item>
                  <nz-form-control>
                    <button nz-button nzType="primary" (click)="save()">
                      เพิ่ม
                    </button>
                  </nz-form-control>
                </nz-form-item>
              </div>
            </nz-row>
          </form>
        </nz-tab>
        <nz-tab [nzTitle]="'ค้นหา'">

          <form
            [formGroup]="subjectForm"
            nzLayout="'vertical'"
            class="ss-form-search-criteria"
          >
            <nz-row nz-row [nzGutter]="24" class="center">
              <div nz-col nzXs="0" nzSm="0" nzMd="5"></div>
              <div nz-col nzXs="24" nzSm="24" nzMd="6">
                <nz-form-item>
                  <nz-form-label [nzSpan]="6"
                    >รหัสวิชา</nz-form-label
                  >
                  <nz-form-control>
                    <input
                      nz-input
                      formControlName="subjectId"
                      placeholder=""
                    />
                  </nz-form-control>
                </nz-form-item>
              </div>

              <div nz-col nzXs="24" nzSm="24" nzMd="6">
                <nz-form-item>
                  <nz-form-label [nzSpan]="6"
                    >ขื่อวิชา</nz-form-label
                  >
                  <nz-form-control>
                    <input
                      nz-input
                      formControlName="subjectName"
                      placeholder=""
                    />
                  </nz-form-control>
                </nz-form-item>
              </div>
              <div nz-col nzSm="2" nzMd="6">
                <nz-form-item>
                  <nz-form-control>
                    <button nz-button nzType="primary" (click)="search(id)">
                      ค้นหา
                    </button>
                  </nz-form-control>
                </nz-form-item>
              </div>
            </nz-row>
          </form>
        </nz-tab>
      </nz-tabset>
        </nz-collapse-panel>
      </nz-collapse>
      <br />
      <nz-collapse>
        <nz-collapse-panel
          class="collapse-header"
          nzHeader="วิชาทั้งหมด"
          [nzActive]="true"
        >
          <div class="d-flex flex-column" style="height: 100%">
            <div class="flex-grow">
              <div nz-row [nzGutter]="24">
                <div nz-col [nzSpan]="24">
                  <div #tableContainer class="table_container">
                    <nz-table
                      #basicTable
                      nzBordered
                      [nzData]="listOfData"
                      nzSize="small"
                      [(nzPageIndex)]="this.page.pageNumber"
                      [(nzPageSize)]="this.page.pageSize"
                      (nzPageIndexChange)="search(false)"
                      (nzPageSizeChange)="search(false)"
                      [nzFrontPagination]="false"
                      [nzTotal]="total"
                      [nzLoading]="loadingTable"
                      #headerTable
                      [nzScroll]="{ y: '240px' }"
                    >
                      <thead (nzSortChange)="sort(id)" nzSortFn>
                        <tr>
                          <th
                            nzAlign="center"
                            nzShowSort
                            nzColumnKey="id"
                            nzWidth="70px"
                          >
                            Id
                          </th>
                          <th
                            nzAlign="center"
                            nzColumnKey="subjectId"
                            nzWidth="250px"
                          >
                            รหัสวิชา
                          </th>
                          <th
                            nzAlign="center"
                            nzColumnKey="stdName"
                            nzWidth="250px"
                          >
                            ชื่อวิชา
                          </th>
                          <th
                            nzAlign="center"
                            nzColumnKey="stdLastname"
                            nzWidth="250px"
                          >
                            จำนวนหน่วยกิจ
                          </th>
                          <th nzAlign="center" nzWidth="250px">จัดการ</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let data of basicTable.data">
                          <td nzAlign="center">{{ data.id }}</td>
                          <td nzAlign="center">{{ data.subjectId }}</td>
                          <td nzAlign="center">{{ data.subjectName }}</td>
                          <td nzAlign="center">{{ data.subjectCredit }}</td>
                          <td nzAlign="center">
                            <nz-button-group>
                              <button nz-button nzDanger>
                                <i nz-icon nzType="edit" nzTheme="outline"></i>
                              </button>
                              <button nz-popconfirm
                              nzPopconfirmTitle="ต้องการลบวิชานี้หรือไม่"
                              (nzOnConfirm)="delete(data.id)"
                              (nzOnCancel)="cancel()"
                              nzPopconfirmPlacement="topRight"
                              nz-button  nzDanger>
                                <i
                                  nz-icon
                                  nzType="delete"
                                  nzTheme="fill"
                                ></i>
                              </button>
                            </nz-button-group>
                          </td>
                        </tr>
                      </tbody>
                    </nz-table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </nz-collapse-panel>
      </nz-collapse>
      <br />
    </div>

</div>
<ng-template> </ng-template>
